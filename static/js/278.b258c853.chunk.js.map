{"version":3,"file":"static/js/278.b258c853.chunk.js","mappings":"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","sources":["pages/Movies/Movies.jsx","services/api.js","helpers/getGenres.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\n\nimport { getFilmByQuery } from 'services/api';\n\nimport { Box, Form, Loader, MovieList } from 'components/index';\n\nconst MoviesPage = () => {\n  const [searchedMovies, setSearchedMovies] = useState([]);\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const querySearched = searchParams.get('query');\n\n  useEffect(() => {\n    if (!querySearched) return;\n    async function getFilms() {\n      try {\n        setIsLoading(true);\n\n        const { results } = await getFilmByQuery(querySearched);\n\n        setSearchedMovies(results);\n      } catch (error) {\n        setError(error.message);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n    getFilms();\n  }, [querySearched]);\n\n  const handleOnSubmit = value => {\n    setSearchParams({ query: value });\n  };\n\n  return (\n    <>\n      {error && <div>Try to reload the page</div>}\n      {isLoading && <Loader />}\n      <Form onSubmit={handleOnSubmit} />\n      {searchedMovies.length > 0 && (\n        <Box m=\"0 auto\" maxWidth={1200} mt={32}>\n          <MovieList array={searchedMovies} />\n        </Box>\n      )}\n    </>\n  );\n};\n\nexport default MoviesPage;\n","import axios from 'axios';\nimport defaultPhoto from 'img/default-photo.jpeg';\nimport defaultActor from 'img/defaultPerson.jpeg';\nimport { getGenres } from 'helpers/getGenres';\n\nconst API_KEY = '7075a5d5708cc9d9db094f2ee386024f';\naxios.defaults.baseURL = 'https://api.themoviedb.org/3';\n\nexport const getTrendingFilms = async () => {\n  const params = {\n    api_key: API_KEY,\n  };\n  const { data } = await axios.get('/trending/movie/week', { params });\n  const results = data.results.map(({ id, title }) => ({ id, title }));\n  return { results };\n};\n\nexport const getFilmByQuery = async q => {\n  const params = {\n    api_key: API_KEY,\n    language: 'en-US',\n    query: q,\n  };\n  const { data } = await axios.get('/search/movie', { params });\n  const results = data.results.map(({ id, original_title }) => ({\n    id,\n    title: original_title,\n  }));\n  return { results };\n};\n\nexport const getDetailedFilmInfo = async movieId => {\n  const params = {\n    api_key: API_KEY,\n  };\n  const { data } = await axios.get(`/movie/${movieId}`, { params });\n  const {\n    id,\n    original_title,\n    genres,\n    overview,\n    poster_path,\n    release_date,\n    vote_average,\n  } = data;\n\n  return {\n    id,\n    original_title,\n    genres: genres.length ? getGenres(genres) : \"Genres aren't given\",\n    overview,\n    poster_path: poster_path\n      ? 'https://image.tmdb.org/t/p/w300' + poster_path\n      : defaultPhoto,\n    release_date: new Date(release_date).getFullYear(),\n    vote_average: Math.round(vote_average * 10),\n  };\n};\n\nexport const getCastInfo = async movieId => {\n  const params = {\n    api_key: API_KEY,\n    language: 'en-US',\n  };\n  const { data } = await axios.get(`/movie/${movieId}/credits`, { params });\n\n  const array = data.cast.map(\n    ({ id, original_name, profile_path, character }) => ({\n      id,\n      original_name,\n      profile_path: profile_path\n        ? 'https://image.tmdb.org/t/p/w300' + profile_path\n        : defaultActor,\n      character,\n    })\n  );\n  return array;\n};\n\nexport const getReviewsInfo = async movieId => {\n  const params = {\n    api_key: API_KEY,\n    language: 'en-US',\n  };\n  const { data } = await axios.get(`/movie/${movieId}/reviews`, { params });\n\n  const array = data.results.map(({ id, author, content }) => ({\n    id,\n    author,\n    content,\n  }));\n\n  return array;\n};\n","export const getGenres = array => {\n  return array.map(el => el.name).join(', ');\n};\n"],"names":["useState","searchedMovies","setSearchedMovies","error","setError","isLoading","setIsLoading","useSearchParams","searchParams","setSearchParams","querySearched","get","useEffect","getFilmByQuery","results","message","getFilms","onSubmit","value","query","length","m","maxWidth","mt","array","API_KEY","axios","getTrendingFilms","params","api_key","data","map","id","title","q","language","original_title","getDetailedFilmInfo","movieId","genres","overview","poster_path","release_date","vote_average","el","name","join","defaultPhoto","Date","getFullYear","Math","round","getCastInfo","cast","original_name","profile_path","character","defaultActor","getReviewsInfo","author","content"],"sourceRoot":""}